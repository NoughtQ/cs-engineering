---
title: 分布式系统
slug: 分布式系统
sidebar_position: 0
---


# 分布式系统

Author：蔡龙祥

# Intro

- 分布式系统无处不在，比较常见的应用有浏览器搜索，大型联网游戏，在线交易平台，网络聊天平台，云计算平台，区块链等等。
- 分布式是一种抽象的概念，它表示分布式系统中提供服务的各个节点位于分散的位置，这个分散既可以是地理上的也可以是逻辑上的。
- 最小物理模型定义的分布式系统是由分散的各个节点之间通过网络进行通信，以此进行资源传递，信息交流，由各个节点共同实现整体所需要的功能组成的系统。

# Necessity

<div class="callout callout-bg-2 callout-border-2">
<div class='callout-emoji'>📚</div>
<p>如无必要，勿增实体</p>
</div>

一个服务如果能在单个节点上部署，并且能够通过低成本的升级硬件以及改善业务代码来保证业务稳定运行，那么是没有必要引入分布式系统的。

然而应对增长的业务需求，单个节点提高处理性能的方式所需的成本如果过于昂贵，就需要考虑使用分布式系统架构了

<div class="callout callout-bg-2 callout-border-2">
<div class='callout-emoji'>🌲</div>
<p>引入更多的问题</p>
</div>

1. 首先需要摒弃的错误假设
    1. The network is reliable.
    2. Latency is zero.
    3. Bandwidth is infinite.
    4. The network is secure.
    5. Topology doesn't change.
    6. There is one administrator.
    7. Transport cost is zero.
    8. The network is homogeneous.

2. 需要解决实现分布式系统的异构性，开放性，安全性，可伸缩性，故障处理，并发性，透明性等特性产生的问题
3. 分布式系统采用分片的思想，把整个系统的复杂业务逻辑拆分到各个节点上，各个节点各司其职，进行分布式计算与分布式存储，需要保证单一节点的故障不会导致整个系统的崩溃。

采用Replication解决此类问题，引入新的问题。

1. 分布式系统之间各个节点通过网络进行通信，仅考虑非拜占庭条件，分布式系统需要解决网络延迟，数据传输失序，丢包等问题导致的数据不一致问题。考虑拜占庭条件，还需要考虑网络安全性，数据传输防篡改，系统脆弱性检测等等预防外界攻击的手段

应用一致性共识算法，如何基于算法构建工程项目也是问题

1. 分布式系统的维护成本高，配置更改的难度大

# Advantage

<div class="callout callout-bg-2 callout-border-2">
<div class='callout-emoji'>🌲</div>
<p>克服重重困难，途中的付出，会有回报</p>
</div>

1. 分区容错性+强一致性/弱一致性（具体见分布式理论）
2. ANSA定义的透明性
    - <em>访问透明性</em>（较重要）：访问远程资源与本地资源的操作相同
    - 位置透明性（较重要）：不需要知道资源的具体位置（物理位置或者网络位置）就可以访问它们
    - 并发透明性:多个进程可以同时访问资源且互不干扰
    - 复制透明性：分布式集群使用副本提高可用性和可靠性，而使用者无需知道副本信息
    - 故障透明性：分区容错，分布式集群内部分组件故障不会导致集群的不可用
    - 移动透明性：系统内部资源位置的移动不会影响集群的服务
    - 性能透明性：系统的性能可以通过配置灵活地进行改变
    - 伸缩透明性：系统进行扩展升级不会影响系统结构以及业务算法实现

3. 服务器能够一直运行（可用性），返回给客户正确的信息（可靠性）
4. 高性能高并发高可用
5. 可拓展性强：可以根据业务需求动态调度服务器节点，需求量大时可以通过增加服务节点提高响应速度

# Composition

## Network

计算机网络本身也是一个大型的分布式系统，它是支持现代分布式系统和应用的基础设施，它本身又是以实现远程通信，数据与资源共享的功能为目的构建的，通过将多台计算机连接起来，使它们能够相互通信和协作。

计算机网路实现的功能：

1. 数据共享：分布在不同位置的计算机可以通过计算机网络访问和共享存储在其他计算机上的数据。
2. 资源共享分布在不同地点的计算机可以通过分布式调度策略共享硬件、软件和计算资源。例如用户通过网络远程操纵其他节点上的打印机、存储设备、数据库等。
3. 信息传递：远程通信使得分布在不同地点的计算机可以相互交换数据和信息。分片是实现分布式系统的重要思想之一，首先将任务切分成多个子任务，然后借助计算机网络进行节点间的通信，实现任务的分配调度
4. 负载均衡：计算机网络可以通过负载均衡的技术，将请求分发到网络中的多台计算机上，从而实现资源的均衡利用。负载均衡可以根据计算机的负载情况和性能指标，智能地调度请求，提高系统的性能和可用性。

## Model

### 2.1 物理模型

从分布式系统的底层硬件和网络中抽象出来的元素表示

1. 早期（上世纪70年代）的分布式系统节点较少，提供的服务少，不考虑开放性，系统大部分是同构的(e.g. 邮件系统）
2. 互联网时代（上世纪90年代）的分布式系统节点多，提供服务多，开放性高，系统异构性强（web服务）
3. 当代分布式系统，由于云计算的出现，分布式系统的节点已经不局限于台式机，可以是手机以及单片机，异构性再度增强
4. 系统的分布式系统，如同将互联网定义成网络的网络，用系统的系统表示一个复杂的系统，例如环境监测系统，其本身的实现依赖于多个子系统，每个子系统的异构性也很强

<table>
<colgroup>
<col width="100"/>
<col width="50"/>
<col width="238"/>
<col width="167"/>
<col width="175"/>
</colgroup>
<tbody>
<tr><td><p>分布式系统</p></td><td><p>规模</p></td><td><p>异构性</p></td><td><p>开放性</p></td><td><p>服务质量</p></td></tr>
<tr><td><p>早期</p></td><td><p>小</p></td><td><p>有限</p></td><td><p>优先级低</p></td><td><p>起步阶段，不高</p></td></tr>
<tr><td><p>互联网规模</p></td><td><p>大</p></td><td><p>平台，语言，中间件层面都很大</p></td><td><p>重要，引入一系列标准</p></td><td><p>重要，引入一系列服务</p></td></tr>
<tr><td><p>当代</p></td><td><p>超大</p></td><td><p>超大</p></td><td><p>极具挑战</p></td><td><p>极具挑战</p></td></tr>
</tbody>
</table>

### 2.2 体系结构模型

#### 2.2.1 体系结构元素

1. 分布式系统中通信的实体是进程、线程
2. 通信泛型有进程间通信，远程调用以及间接通信
3. 常见体系结构有客户-服务器（C/S）以及对等（P2P）
4. 服务放置需考虑将服务映射到多个服务器，设置缓存，移动代码以及移动代理

#### 2.2.2 常见模型

![](/assets/N0nxbRF4RoKZuOxNz14cFC6Hnrd.png)

1. 分层体系结构
2. 层次化体系结构
3. 瘦客户

#### 2.2.3 中间件

- 中间件是什么？

> 由一组进程组成，提供了一层编程抽象，以及分布式系统所需要的基础服务，实现数据的通信和共享

- 中间件作用

> 在原有业务实现上添加一层服务，用于补全业务的功能，也可以提高业务的安全性与性能

- 常见的中间件平台分类

> 消息队列：rabbitmq
> 分布式对象：RM-ODP
> 分布式组件:CORBA组件
> 发布-订阅系统：CORBA事件服务
> web服务： Apache，Nginx
> 对等：OceanStore，ivy

### 2.3 基础模型

#### 2.3.1 交互模型

#### 2.3.2 故障模型

#### 安全模型

### 
## Middleware

## Operating system

基本操作系统提供了在物理层之上的面向问题的抽象，能够托管这些硬件、环境资源并且给出一个抽象的接口，使上层访问这些资源具有透明性，同时还提供了安全功能，限制上层调用某些资源。

网络操作系统，例如unix和windows，可以通过联网实现访问透明性，联网的设备可以通过ssh技术调用其他设备的进程资源，但是每个结点的系统资源是独立的，不能视作一个集群进行集中管理

分布式操作系统，将所有结点资源抽象为一个集群，可以通过操纵集群来管理调度所有集群的资源

# Paradigms

# Reference

https://zhuanlan.zhihu.com/p/99932839

