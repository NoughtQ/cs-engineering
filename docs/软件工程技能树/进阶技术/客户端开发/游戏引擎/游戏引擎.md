---
title: 游戏引擎
slug: 游戏引擎
sidebar_position: 0
---


# 游戏引擎

Author：NA

## 游戏引擎是什么

> 游戏引擎是指一些已编写好的可编辑电脑游戏系统或者一些交互式实时图像应用程序的核心组件。
> 这些系统为游戏设计者提供各种编写游戏所需的各种工具，其目的在于让游戏设计者能容易和快速地做出游戏程式而不用由零开始。
> 游戏引擎包含以下系统：渲染引擎（即“渲染器”，含二维图像引擎和三维图像引擎）、物理引擎、碰撞检测系统、音效、脚本引擎、电脑动画、人工智能、网络引擎以及场景管理。

“游戏引擎” 这个术语在 20 世纪 90 年代中期形成，与第一人称射击游戏 (frst person shooter, FPS) 如 id Software 公司开发的非常受欢迎的游戏《毁灭战士》(Doom) 有关。《毁灭战士》的软件架构被相当清楚地划分成核心软件组件（如三维图形渲染系统、碰撞检测系统和音频系统等）、美术资产、游戏世界、构成玩家游戏体验的游戏规则。这么划分是很有价值的，若另一个开发商取得这类游戏的授权，只要制作新的美术、关卡布局、武器、角色、载具、游戏规则等，对引擎软件做出很少的修改，就可以把游戏打造成新产品。
在 20 世纪 90 年代末，一些游戏，如《雷神之锤 Ⅲ 竞技场》(Quake Ⅲ Arena) 和《虚幻》(Unreal)，在设计时就照顾到复用性和 mod。另外，使用脚本语言，譬如 id 公司的 Quake C，可以非常方便地定制引擎。如今游戏开发者可以取得一个游戏引擎的投权，复用其中大部分关键软件组件去制作游戏。虽然这种做法还要开发一些定制软件工程，但比工作室独立开发所有的核心软件组件要经济得多。
通常，游戏和其引擎之间的分界线是很模糊的。一些引擎有相当清晰的划分，一些则没有尝试把二者分开。在一款游戏中，渲染代码可能特别“知悉”如何画一个角色；在另一款游戏中，渲染引擎可能只提供多用途的材质及着色功能，角色可能完全是用数据去定义的。没有工作室可以完美地划分游戏和引擎。这不难理解，因为随着游戏设计的逐渐成形，这两个组件的定义会经常转移。

---

举个例子，假设我们穿越回20世纪80年代，我们的手中已经有整套的 FC 游戏《超级马里奥》的代码，现在我们要开发另一款 FC 游戏《冒险岛》。

![](/assets/JIygbSccBoEd2qx9OXIcRyl9nSg.png)

此时我们需要从零开始吗？显然，这两款游戏有着太多共性，都是一个游戏角色在横板卷动的地图上蹦来蹦去，都可以踩死怪物。当然，也有不同，画面不同，声音不同，关卡不同……但对于共同的功能，聪明的我们当然会重用一些现成的代码。而这种横板卷轴游戏模板的通用性非常好，目前游戏界对它的需求量也非常大，所以我们决定<b>把这种特定类型游戏的核心功能提炼出来，供那些也要开发这种游戏的人使用</b>。

---

因此，这里说的“游戏引擎”是指可扩展的软件，而且不需要大量修改就能成为多款游戏软件的基础。

## 不同游戏类型的引擎差异

有些人可能以为游戏引擎能变成一个通用软件，去运行几乎任何可以想象到的游戏内容。可是，这个设想至今尚未 (或许永远不能) 实现。大部分游戏引擎是针对特定游戏及特定硬件平台所精心制作及微调的。就算是一些较通用的游戏引擎，其实也只适合制作某类型的游戏，例如第一人称射击或赛车游戏。我们完全可以说，游戏引擎或中间件组件越通用，在特定平台运行特定游戏的性能就越一般。

![](/assets/MU99b6RBPopCimx3YFUcQd2wnMh.png)

出现这种现象是因为设计高效的软件总是需要取舍的，而这些取舍是基于一些假设的，像一个软件会如何使用及在哪个硬件上运行等。例如，一个渲染引擎为紧凑的室内环境而设计，一般就不能很好地渲染广阔的室外场景。
随着计算机硬件速度的提高及专用显卡的应用，再加上高效的渲染算法及数据结构，不同游戏类型的图形引擎差异已经缩小。例如，现在可以用第一人称射击引擎去做实时策略游戏。但是，通用性和最优性仍然需要取舍。按照游戏/硬件平台的特定需求及限制，经常可以通过微调引擎制作更精美的游戏。

所以通常在某种程度上，游戏引擎是为某游戏类型而设计的，以下是几种常见的游戏类型以及其技术需求。

1. <b>第一人称射击游戏</b>

FPS是开发技术难度极高的游戏类型之一，FPS游戏通常会注重以下技术：
- 高效的渲染大型三维虚拟世界
- 快速反应的摄像机控制及瞄准机制
- 玩家的虚拟手臂和武器的逼真动画
- 各式各样的手持武器
- 宽容的玩家角色运动及碰撞模型，通常使游戏有种“漂浮”的感觉
- 非玩家角色（如玩家的敌人或者同盟）有逼真的动画及智能
- 小规模在线多人游戏的能力（通常支持多至同时64位玩家在线），及无处不在的死亡竞赛模式

1. <b>平台及其他第三人称游戏</b>

“平台”游戏 (platformer) 指的是基于人物角色的第三人称游戏，在这类游戏中，主要的机制就是在平台之间跳跃。从技术上说，平台游戏可以和第三人称射击/动作/冒险游戏类型一起考虑。其特别注重的技术如下：
- 移动平台、梯子、绳子、棚架及其他有趣的运动模式。
- 用来解密的环境元素。
- 第三人称的“跟踪摄像机”会一直注视玩家角色，也通常会让玩家用手柄右摇杆或鼠标旋转摄像机。
- 复杂的摄像机碰撞系统，以保证视点不会穿过背景几何物体或动态的前景物体。

1. <b>格斗游戏</b>
    格斗游戏（fighting game）通常使两个玩家控制角色在一个擂台互相对打。传统格斗游戏注重以下技术：
    - 丰富的格斗动画。
    - 准确的攻击判定。
    - 能侦测复杂按钮及摇杆组合的玩家输入系统。
    - 人群，或相对静态的背景。

由于这些游戏的三维世界比较小，而且摄像机一直位于动作的中心，以往这些游戏只有很少甚至不需要世界细分或遮挡剔除。同样的，这些游戏不要求使用高阶的三维音频传播模型。
更尖端的格斗游戏，会把技术提升到另一个层次，这类作品有以下特点：
- 高清的角色图形，包括仿真的皮肤着色器。着色器模拟了表面下散射及冒汗效果。
- 逼真的角色动画。
- 基于物理的布料及头发模拟。

1. <b>竞速游戏</b>

> 包括所有以赛道上驾驶车辆或者其他载具为主要任务的游戏。

竞速游戏通常是非常线性的，这比较像旧时的FPS游戏。但移动速度一般比FPS游戏快许多。因此，这类游戏经常使用非常长的走廊式赛道和环形赛道，有时加入一些可选分支或捷径。

典型竞速游戏有以下技术特性：
- 使用多种“窍门”去渲染遥远的背景，例如使用二维纸板形式的树木，山岳和山脉。
- 赛道通常切开成简单的二维区域，成为“分区(sector)"。这些数据结构用来实现渲染优化、可见性判断(visibility determination)，帮助非玩家操控车辆的人工智能及路径搜寻，以及解决很多其他技术问题。
- 第三人称视角摄像机通常追随在车辆背后，第一人称摄像机有时候会置于驾驶舱里。
- 如果赛道经过天桥底及其他狭窄空间，必须花精力防止摄像机和背景几何物体碰撞。

1. <b>实时策略游戏</b>

实时策略 (real-time strategy, RTS) 游戏类型可以认为是由《沙丘魔堡》奠定的。RTS 通常不容许玩家改变视角以观看不同距离的景物，这个限制使开发者能在 RTS 渲染引擎上采用各种优化。

较老的同类游戏基于栅格去构建游戏世界，并使用正射投影，这两个技巧大大简化了渲染系统。

现在的RTS游戏也会使用透视投影及真三维世界，但这些游戏可能仍使用栅格排列系统，以保证作战单位和背景元素如建筑物能适当的对齐。

RTS游戏的惯用手法如下：
- 每个作战单位使用相对较低解析度的模型，使游戏能支持同时显示大量单元。
- 游戏的设计和进行是在高度场地形画面上展开的。
- 除了部署兵力，游戏通常准许玩家在地形上兴建新的建筑物。
- 用户互动方式通常为单击及以范围选取单元，再加上包含指令、装备、作战单元种类、建筑种类等的菜单及工具栏。

1. <b>大型多人在线游戏</b>

Massive Multiplayer Online Game，其定义为能同时支持大量玩家，一般来说，这些玩家会在非常大的持久世界里进行游戏(持久世界是指其状态能持续很长一段时间，比特定玩家每次玩的时间长很多)。除了同时在线人数和持久性外，MMOG的游戏体验和小型的多人游戏是相似的。

MMOG 的子类型有 MMO 角色扮演游戏 (MMORPG)，MMO 实时策略游戏 (MMORTS) 及 MMO 第一人称射击游戏。MMOG 的核心是一组非常强大的服务器，这些服务器维护游戏世界的权威状态，管理用户登入/登出，也会提供用户间文字对话或 ip 电话等服务。

1. <b>玩家创作内容</b>

Player-authorer content，最典型的比如《我的世界》。

1. <b>其他游戏类型</b>

还有很多类型就不详细解释了：
- 体育游戏
- 角色扮演游戏
- 上帝模拟游戏
- 环境或社会模拟游戏
- 解密游戏
- 非电子游戏的移植，如象棋，卡牌游戏
- 基于网页的游戏
- 其他更多游戏类型

---

各种游戏类型有其特殊的技术需求，因此传统上游戏引擎因游戏类型而有些差异。然而，不同游戏类型的技术需求也有很大的共通之处，尤其在单个硬件平台上，共通之处特别多。由于硬件性能的不断提升，因考虑优化而产生的游戏类型差异将会缩小。因此，现在把一项引擎技术应用于不同游戏类型，甚至不同硬件平台也变得可行。

## 游戏引擎概览

于是，根据游戏需求的不同，游戏厂商要么自己开发引擎，要么购买商业引擎。但真正的商业引擎不但必须有规范的开发流程，以便于定制化，而且要有后续的技术支持来帮助购买引擎的人解决遇到的各种问题，以保障购买者能够实现想要的功能。但能真正实现商业化的引擎也仅有少数几款。

商业引擎数量少，加之每款引擎的授权费用高昂，所以很多团队更愿意自己开发引擎。而几乎每一款知名游戏都有自己的引擎，比如育碧的《刺客信条》、艺电的《战地》、科乐美的《实况足球》。但自家的引擎同样需要不断迭代，以保证跟上时代的发展，否则落后的游戏引擎终究会被淘汰。

在国内曾经技术匮乏的那个年代，Gamebryo 和 Ogre 算是最早的两款引擎，Gamebryo是用得最多的商业引擎，Ogre是用得最多的非商业引擎。现如今，除了传统大厂商在自己迭代引擎之外，大部分厂商选择了商业引擎。国内厂商更是如此，在3D游戏引擎的选择上都很明确，手机端用Unity，PC端用Unreal Engine。这些引擎不同于以往特定类型的游戏引擎，它们耦合性很低，通用性更好。

![](/assets/PHu6bCioaoZEAvxu1zPcBgwYnvc.png)

---

1. <b>雷神之锤引擎家族</b>
2. <b>虚幻引擎</b>
3. <b>Source 引擎</b>
4. <b>DICE 的寒霜引擎</b>
5. <b>CryEngine</b>
6. <b>索尼的 PhyreEngine</b>
7. <b>微软的 XNA Game Studio</b>
8. <b>Unity</b>
9. <b>供非程序员使用的二维游戏引擎</b>
10. <b>其他商业引擎</b>
11. <b>专有内部引擎</b>
12. <b>开源引擎</b>

